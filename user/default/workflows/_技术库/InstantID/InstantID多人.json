{"id":"a89339f6-ea58-4a40-9f0a-9da83eff988f","revision":0,"last_node_id":93,"last_link_id":290,"nodes":[{"id":15,"type":"PreviewImage","pos":[2160,-150],"size":[584.0855712890625,610.4592895507812],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":19}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":8,"type":"VAEDecode","pos":[2170,-270],"size":[210,46],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":254}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[19]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"VAEDecode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":81,"type":"Reroute","pos":[1980,120],"size":[75,26],"flags":{},"order":14,"mode":0,"inputs":[{"name":"","type":"*","link":253}],"outputs":[{"name":"VAE","type":"VAE","slot_index":0,"links":[254]}],"properties":{"showOutputText":true,"horizontal":false,"ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}}},{"id":79,"type":"ConditioningCombine","pos":[1410,-190],"size":[228.39999389648438,46],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":247},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":248}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[249]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"ConditioningCombine","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":84,"type":"ImageFlip+","pos":[990,-210],"size":[315,58],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":258},{"localized_name":"axis","name":"axis","type":"COMBO","widget":{"name":"axis"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[259]}],"properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","Node name for S\u0026R":"ImageFlip+","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["x"]},{"id":88,"type":"MaskFlip+","pos":[990,-110],"size":[315,58],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":263},{"localized_name":"axis","name":"axis","type":"COMBO","widget":{"name":"axis"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":0,"links":[264]}],"properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","Node name for S\u0026R":"MaskFlip+","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["x"]},{"id":85,"type":"SolidMask","pos":[970,510],"size":[210,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":0,"links":[260]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"SolidMask","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[0,1280,960]},{"id":11,"type":"InstantIDModelLoader","pos":[-210,-150],"size":[210,60],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"instantid_file","name":"instantid_file","type":"COMBO","widget":{"name":"instantid_file"},"link":null}],"outputs":[{"localized_name":"INSTANTID","name":"INSTANTID","type":"INSTANTID","slot_index":0,"links":[197,238]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"InstantIDModelLoader","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["ip-adapter.bin"]},{"id":87,"type":"MaskComposite","pos":[1232,583],"size":[210,126],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"MASK","link":260},{"localized_name":"source","name":"source","type":"MASK","link":261},{"localized_name":"x","name":"x","type":"INT","widget":{"name":"x"},"link":null},{"localized_name":"y","name":"y","type":"INT","widget":{"name":"y"},"link":null},{"localized_name":"operation","name":"operation","type":"COMBO","widget":{"name":"operation"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":0,"links":[262,263]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"MaskComposite","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[0,0,"add"]},{"id":86,"type":"SolidMask","pos":[970,660],"size":[210,106],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":0,"links":[261]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"SolidMask","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[1,640,960]},{"id":40,"type":"CLIPTextEncode","pos":[146,487],"size":[286.3603515625,112.35245513916016],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":123},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[204,278]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["photograph, deformed, glitch, noisy, realistic, stock photo, naked"],"color":"#322","bgcolor":"#533"},{"id":5,"type":"EmptyLatentImage","pos":[1431,20],"size":[210,106],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"EmptyLatentImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[1280,960,1]},{"id":3,"type":"KSampler","pos":[1730,-180],"size":[315,262],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":256},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":249},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":288},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"KSampler","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[1631594039,"fixed",30,4.5,"ddpm","normal",1]},{"id":80,"type":"ConditioningCombine","pos":[1410,-90],"size":[228.39999389648438,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":290},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":287}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[288]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"ConditioningCombine","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":77,"type":"ApplyInstantID","pos":[990,-528],"size":[315,266],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"instantid","name":"instantid","type":"INSTANTID","link":238},{"localized_name":"insightface","name":"insightface","type":"FACEANALYSIS","link":239},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":240},{"localized_name":"image","name":"image","type":"IMAGE","link":246},{"localized_name":"model","name":"model","type":"MODEL","link":255},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":272},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":278},{"localized_name":"image_kps","name":"image_kps","shape":7,"type":"IMAGE","link":259},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":264},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_at","name":"start_at","type":"FLOAT","widget":{"name":"start_at"},"link":null},{"localized_name":"end_at","name":"end_at","type":"FLOAT","widget":{"name":"end_at"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[256]},{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":1,"links":[247]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":2,"links":[290]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"ApplyInstantID","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[0.8,0,1]},{"id":60,"type":"ApplyInstantID","pos":[991,73],"size":[315,266],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"instantid","name":"instantid","type":"INSTANTID","link":197},{"localized_name":"insightface","name":"insightface","type":"FACEANALYSIS","link":198},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":199},{"localized_name":"image","name":"image","type":"IMAGE","link":214},{"localized_name":"model","name":"model","type":"MODEL","link":206},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":203},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":204},{"localized_name":"image_kps","name":"image_kps","shape":7,"type":"IMAGE","link":257},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":262},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_at","name":"start_at","type":"FLOAT","widget":{"name":"start_at"},"link":null},{"localized_name":"end_at","name":"end_at","type":"FLOAT","widget":{"name":"end_at"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[255]},{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":1,"links":[248]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":2,"links":[287]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"ApplyInstantID","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[0.9,0,1]},{"id":38,"type":"InstantIDFaceAnalysis","pos":[-210,-40],"size":[210,60],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"FACEANALYSIS","name":"FACEANALYSIS","type":"FACEANALYSIS","slot_index":0,"links":[198,239]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"InstantIDFaceAnalysis","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["CUDA"]},{"id":16,"type":"ControlNetLoader","pos":[-210,70],"size":[210,60],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","slot_index":0,"links":[199,240]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"ControlNetLoader","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["instantid_controlnet.safetensors"]},{"id":4,"type":"CheckpointLoaderSimple","pos":[-312,198],"size":[315,98],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[206]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[122,123,266]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[253]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CheckpointLoaderSimple","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["SDXL1.0\\artificialDREAMSDXL_v10.safetensors"]},{"id":82,"type":"LoadImage","pos":[591,511],"size":[315,314.0000190734863],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[257,258]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["BVDA6P8EPB4Z6QE166WV0N36A0.jpeg","image"]},{"id":78,"type":"LoadImage","pos":[714,-512],"size":[214.080078125,314],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[246]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["pasted/image.png","image"]},{"id":89,"type":"CLIPTextEncode","pos":[314,-421],"size":[291.9967346191406,128.62518310546875],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":266},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[272]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["((masterpiece, best quality, high definition, high resolution, very aesthetic)), realistic lighting effects, very detailed eyes, pale skin, ((very pretty young girl working out at the gym)), sagging soft large breasts, red eyeshadow, uncensored, dark blue eyes, dynamic angle,"],"color":"#232","bgcolor":"#353"},{"id":13,"type":"LoadImage","pos":[715,35],"size":[214.080078125,314],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[214]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["pasted/image (1).png","image"]},{"id":39,"type":"CLIPTextEncode","pos":[309,171],"size":[291.9967346191406,128.62518310546875],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":122},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[203]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["((masterpiece, best quality, high definition, high resolution, very aesthetic)), very detailed eyes, realistic lighting effect, ((very pretty woman exercising at the gym)), red eyeshadow, colored eyelashes, very soft breasts, detailed hand, neatly hair, blushing, lovely, detailed nipples, erect nipples, pretty nipples, small areola, large breasts, full body, depth of field, topless, leggings, little sweat, heavy breath, ponytail hair, breasts out of clothes, fitness center, concentrated, exercise using exercise equipment, exercising hard, solo focus, exhausted, faceless onlookers,"],"color":"#232","bgcolor":"#353"},{"size":[450,1000],"id":93,"color":"#335","properties":{"text":"🎭 InstantID Multi-ID 使用说明 🎭\n\n⭐ 在一张图中生成多个不同身份的人物！\n\n\n✅ Multi-ID 的工作原理\n\n【核心思路】\n使用 Mask 将画面分成多个区域，\n每个区域应用不同人脸的 InstantID。\n\n【本工作流的分区】\n\n   左半边       右半边    \n  人物 A        人物 B    \n  (640px)     (640px)   \n\n     总宽度: 1280 x 960\n\n\n🖼️ 三个 LoadImage 的作用\n\n• LoadImage (13) - 人物 A 的人脸参考图\n   连接到 InstantID(60) 的 image\n   提取人物 A 的面部特征\n\n• LoadImage (78) - 人物 B 的人脸参考图\n   连接到 InstantID(77) 的 image\n   提取人物 B 的面部特征\n\n• LoadImage (82) - 姿势/朝向参考图\n   连接到两个 InstantID 的 image_kps\n   控制两个人物的面部朝向\n\n\n🔄 image_kps 与 ImageFlip 的作用\n\n【为什么要翻转？让两人面对面！】\n\nLoadImage(82)\n    \n     InstantID(60) 人物A\n                       面朝右 \n    \n     ImageFlip  InstantID(77) 人物B\n                        面朝左 \n\n如果不翻转，两个人会朝同一方向看，\n构图会很奇怪。翻转后实现\"面对面\"效果。\n\n\n⚙️ Mask 分区原理\n\nSolidMask (85): 全黑 1280x960 (value=0)\nSolidMask (86): 白色 640x960 (value=1)\nMaskComposite: 合并后左半白右半黑\n               人物 A 的作用区域\n\nMaskFlip: 翻转后变成左半黑右半白\n               人物 B 的作用区域\n\n\n�� 数据流总结\n\n【人物 A - 左侧】\nLoadImage(13) image InstantID(60)\nLoadImage(82) image_kps InstantID(60)\nMask(左半白) mask InstantID(60)\n\n【人物 B - 右侧】\nLoadImage(78) image InstantID(77)\nLoadImage(82)Flipkps InstantID(77)\nMask(右半白) mask InstantID(77)\n\n【合并输出】\nConditioningCombine 合并两人的 conditioning\n                 \n             KSampler\n\n\n💡 如何修改\n\n【调整人物位置比例】\n修改 SolidMask (86) 的 width 值\n- width=320  人物 A 占 1/4\n- width=640  人物 A 占 1/2 (当前)\n- width=960  人物 A 占 3/4\n\n【增加更多人物】\n需要添加更多的:\n- LoadImage + ApplyInstantID\n- SolidMask 分区\n- ConditioningCombine 合并\n\n\n📁 模型路径\n\n• InstantID: resources\\models\\instantid\\\n• ControlNet: instantid_controlnet.safetensors\n\n\n🔗 参考\n\n项目: github.com/cubiq/ComfyUI_InstantID"},"pos":[-750,-400],"widgets_values":["🎭 InstantID Multi-ID 使用说明 🎭\n\n⭐ 在一张图中生成多个不同身份的人物！\n\n\n✅ Multi-ID 的工作原理\n\n【核心思路】\n使用 Mask 将画面分成多个区域，\n每个区域应用不同人脸的 InstantID。\n\n【本工作流的分区】\n\n   左半边       右半边    \n  人物 A        人物 B    \n  (640px)     (640px)   \n\n     总宽度: 1280 x 960\n\n\n🖼️ 三个 LoadImage 的作用\n\n• LoadImage (13) - 人物 A 的人脸参考图\n   连接到 InstantID(60) 的 image\n   提取人物 A 的面部特征\n\n• LoadImage (78) - 人物 B 的人脸参考图\n   连接到 InstantID(77) 的 image\n   提取人物 B 的面部特征\n\n• LoadImage (82) - 姿势/朝向参考图\n   连接到两个 InstantID 的 image_kps\n   控制两个人物的面部朝向\n\n\n🔄 image_kps 与 ImageFlip 的作用\n\n【为什么要翻转？让两人面对面！】\n\nLoadImage(82)\n    \n     InstantID(60) 人物A\n                       面朝右 \n    \n     ImageFlip  InstantID(77) 人物B\n                        面朝左 \n\n如果不翻转，两个人会朝同一方向看，\n构图会很奇怪。翻转后实现\"面对面\"效果。\n\n\n⚙️ Mask 分区原理\n\nSolidMask (85): 全黑 1280x960 (value=0)\nSolidMask (86): 白色 640x960 (value=1)\nMaskComposite: 合并后左半白右半黑\n               人物 A 的作用区域\n\nMaskFlip: 翻转后变成左半黑右半白\n               人物 B 的作用区域\n\n\n�� 数据流总结\n\n【人物 A - 左侧】\nLoadImage(13) image InstantID(60)\nLoadImage(82) image_kps InstantID(60)\nMask(左半白) mask InstantID(60)\n\n【人物 B - 右侧】\nLoadImage(78) image InstantID(77)\nLoadImage(82)Flipkps InstantID(77)\nMask(右半白) mask InstantID(77)\n\n【合并输出】\nConditioningCombine 合并两人的 conditioning\n                 \n             KSampler\n\n\n💡 如何修改\n\n【调整人物位置比例】\n修改 SolidMask (86) 的 width 值\n- width=320  人物 A 占 1/4\n- width=640  人物 A 占 1/2 (当前)\n- width=960  人物 A 占 3/4\n\n【增加更多人物】\n需要添加更多的:\n- LoadImage + ApplyInstantID\n- SolidMask 分区\n- ConditioningCombine 合并\n\n\n📁 模型路径\n\n• InstantID: resources\\models\\instantid\\\n• ControlNet: instantid_controlnet.safetensors\n\n\n🔗 参考\n\n项目: github.com/cubiq/ComfyUI_InstantID"],"type":"Note","bgcolor":"#447","inputs":[],"flags":{},"order":0,"mode":0,"outputs":[]}],"links":[[2,5,0,3,3,"LATENT"],[7,3,0,8,0,"LATENT"],[19,8,0,15,0,"IMAGE"],[122,4,1,39,0,"CLIP"],[123,4,1,40,0,"CLIP"],[197,11,0,60,0,"INSTANTID"],[198,38,0,60,1,"FACEANALYSIS"],[199,16,0,60,2,"CONTROL_NET"],[203,39,0,60,5,"CONDITIONING"],[204,40,0,60,6,"CONDITIONING"],[206,4,0,60,4,"MODEL"],[214,13,0,60,3,"IMAGE"],[238,11,0,77,0,"INSTANTID"],[239,38,0,77,1,"FACEANALYSIS"],[240,16,0,77,2,"CONTROL_NET"],[246,78,0,77,3,"IMAGE"],[247,77,1,79,0,"CONDITIONING"],[248,60,1,79,1,"CONDITIONING"],[249,79,0,3,1,"CONDITIONING"],[253,4,2,81,0,"*"],[254,81,0,8,1,"VAE"],[255,60,0,77,4,"MODEL"],[256,77,0,3,0,"MODEL"],[257,82,0,60,7,"IMAGE"],[258,82,0,84,0,"IMAGE"],[259,84,0,77,7,"IMAGE"],[260,85,0,87,0,"MASK"],[261,86,0,87,1,"MASK"],[262,87,0,60,8,"MASK"],[263,87,0,88,0,"MASK"],[264,88,0,77,8,"MASK"],[266,4,1,89,0,"CLIP"],[272,89,0,77,5,"CONDITIONING"],[278,40,0,77,6,"CONDITIONING"],[287,60,2,80,1,"CONDITIONING"],[288,80,0,3,2,"CONDITIONING"],[290,77,2,80,0,"CONDITIONING"]],"groups":[],"config":{},"extra":{"workflowRendererVersion":"LG","ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.7375444907542845,"offset":[-275.10186968376024,582.8172901940435]}},"version":0.4}
