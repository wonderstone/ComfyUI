{"id":"3b61a630-4f8d-4b16-8693-e5d6b56ee833","revision":0,"last_node_id":79,"last_link_id":239,"nodes":[{"id":40,"type":"CLIPTextEncode","pos":[520,620],"size":[286.3603515625,112.35245513916016],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":123},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[204]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["photograph, deformed, glitch, noisy, realistic, stock photo"]},{"id":60,"type":"ApplyInstantID","pos":[910,210],"size":[315,266],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"instantid","name":"instantid","type":"INSTANTID","link":197},{"localized_name":"insightface","name":"insightface","type":"FACEANALYSIS","link":198},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":199},{"localized_name":"image","name":"image","type":"IMAGE","link":214},{"localized_name":"model","name":"model","type":"MODEL","link":206},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":203},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":204},{"localized_name":"image_kps","name":"image_kps","shape":7,"type":"IMAGE","link":236},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_at","name":"start_at","type":"FLOAT","widget":{"name":"start_at"},"link":null},{"localized_name":"end_at","name":"end_at","type":"FLOAT","widget":{"name":"end_at"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[227]},{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":1,"links":[229]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":2,"links":[228]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"ApplyInstantID","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[0.8,0,1]},{"id":15,"type":"PreviewImage","pos":[1937,321],"size":[584.0855712890625,610.4592895507812],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":19}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":8,"type":"VAEDecode","pos":[1940,207],"size":[210,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[19]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"VAEDecode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":5,"type":"EmptyLatentImage","pos":[910,540],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"EmptyLatentImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[1016,1016,1]},{"id":72,"type":"ControlNetApplyAdvanced","pos":[1284,416],"size":[226.8000030517578,186],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":229},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":228},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":232},{"localized_name":"image","name":"image","type":"IMAGE","link":239},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":0,"links":[230]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":1,"links":[231]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"ControlNetApplyAdvanced","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[0.65,0,0.35000000000000003]},{"id":77,"type":"Zoe-DepthMapPreprocessor","pos":[1009,839],"size":[210,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":238},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[239]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"12f35647f0d510e03b45a47fb420fe1245a575df","Node name for S\u0026R":"Zoe-DepthMapPreprocessor","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[1024]},{"id":3,"type":"KSampler","pos":[1570,210],"size":[315,262],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":227},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":230},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":231},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"KSampler","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[1631592172,"fixed",30,4.5,"ddpm","karras",1]},{"id":38,"type":"InstantIDFaceAnalysis","pos":[570,180],"size":[227.09793090820312,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"FACEANALYSIS","name":"FACEANALYSIS","type":"FACEANALYSIS","slot_index":0,"links":[198]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"InstantIDFaceAnalysis","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["CUDA"]},{"id":16,"type":"ControlNetLoader","pos":[560,290],"size":[250.07241821289062,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","slot_index":0,"links":[199]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"ControlNetLoader","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["instantid_controlnet.safetensors"]},{"id":11,"type":"InstantIDModelLoader","pos":[560,70],"size":[238.72393798828125,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"instantid_file","name":"instantid_file","type":"COMBO","widget":{"name":"instantid_file"},"link":null}],"outputs":[{"localized_name":"INSTANTID","name":"INSTANTID","type":"INSTANTID","slot_index":0,"links":[197]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"InstantIDModelLoader","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["ip-adapter.bin"]},{"id":4,"type":"CheckpointLoaderSimple","pos":[70,520],"size":[315,98],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[206]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[122,123]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CheckpointLoaderSimple","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["SDXL1.0\\artificialDREAMSDXL_v10.safetensors"]},{"id":13,"type":"LoadImage","pos":[290,70],"size":[214.080078125,314],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[214]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["pasted/image.png","image"]},{"id":74,"type":"LoadImage","pos":[508,816],"size":[315,314.0000305175781],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[236,238]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["00101-1371419906.png","image"]},{"id":39,"type":"CLIPTextEncode","pos":[520,430],"size":[291.9967346191406,128.62518310546875],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":122},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[203]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["((masterpiece, best quality, high definition, high resolution, very aesthetic)), realistic lighting effects, very detailed eyes, pale skin, ((very pretty young girl working out at the gym)), sagging soft large breasts, red eyeshadow, uncensored, dark blue eyes, dynamic angle,"]},{"id":73,"type":"ControlNetLoader","pos":[909,706],"size":[315,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[232]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"ControlNetLoader","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["control-lora\\control-lora-depth-rank256.safetensors"]},{"size":[450,850],"id":79,"color":"#335","properties":{"text":"🎭 InstantID + Depth 使用说明 🎭\n\n\n✅ 必要条件\n\n【模型要求】\n• 只支持 SDXL 模型（不支持 SD1.5/FLUX）\n• InstantID 模型: ip-adapter.bin\n• ControlNet: instantid_controlnet.safetensors\n• InsightFace: antelopev2 (5个 .onnx 文件)\n\n【本工作流额外需要】\n• Control-LoRA: control-lora-depth-rank256.safetensors\n• ZoeDepth 模型: Intel/zoedepth-nyu-kitti (自动下载)\n\n\n⚙️ 参数建议\n\n【ApplyInstantID】\n• weight: 0.8 (ID 相似度)\n• start_at: 0, end_at: 1\n\n【ControlNetApplyAdvanced (Depth)】\n• strength: 0.65 (深度控制强度)\n• start_percent: 0, end_percent: 0.35\n\n【KSampler】\n• steps: 30, cfg: 4.5\n• sampler: ddpm, scheduler: karras\n\n\n🖼️ 本工作流特点\n\n• 双 ControlNet: InstantID + Depth\n• 可以用姿势参考图控制人物姿态\n• LoadImage(上方): 人脸参考图\n• LoadImage(下方): 姿势/深度参考图\n\n\n⚠️ 常见问题\n\n❌ Zoe-DepthMapPreprocessor 卡住/下载中\n   节点会自动从 HuggingFace 下载 Intel/zoedepth-nyu-kitti\n   建议预先手动下载到:\n   D:\\ComfyUI_Official\\resources\\models\\zoedepth\\\n   并配置 HuggingFace 缓存\n\n❌ control-lora-depth 找不到\n   从 stabilityai/control-lora 下载:\n   controlnet\\control-lora\\control-lora-depth-rank256.safetensors\n\n\n📁 模型路径\n\n• InstantID: resources\\models\\instantid\\\n• Control-LoRA: resources\\models\\controlnet\\control-lora\\\n• ZoeDepth: resources\\models\\zoedepth\\ + HF缓存\n• InsightFace: ComfyUI\\models\\insightface\\models\\antelopev2\\\n\n\n🔗 参考\n\n• InstantID: github.com/cubiq/ComfyUI_InstantID\n• Control-LoRA: huggingface.co/stabilityai/control-lora\n• ZoeDepth: huggingface.co/Intel/zoedepth-nyu-kitti"},"pos":[-550,50],"widgets_values":["🎭 InstantID + Depth 使用说明 🎭\n\n\n✅ 必要条件\n\n【模型要求】\n• 只支持 SDXL 模型（不支持 SD1.5/FLUX）\n• InstantID 模型: ip-adapter.bin\n• ControlNet: instantid_controlnet.safetensors\n• InsightFace: antelopev2 (5个 .onnx 文件)\n\n【本工作流额外需要】\n• Control-LoRA: control-lora-depth-rank256.safetensors\n• ZoeDepth 模型: Intel/zoedepth-nyu-kitti (自动下载)\n\n\n⚙️ 参数建议\n\n【ApplyInstantID】\n• weight: 0.8 (ID 相似度)\n• start_at: 0, end_at: 1\n\n【ControlNetApplyAdvanced (Depth)】\n• strength: 0.65 (深度控制强度)\n• start_percent: 0, end_percent: 0.35\n\n【KSampler】\n• steps: 30, cfg: 4.5\n• sampler: ddpm, scheduler: karras\n\n\n🖼️ 本工作流特点\n\n• 双 ControlNet: InstantID + Depth\n• 可以用姿势参考图控制人物姿态\n• LoadImage(上方): 人脸参考图\n• LoadImage(下方): 姿势/深度参考图\n\n\n⚠️ 常见问题\n\n❌ Zoe-DepthMapPreprocessor 卡住/下载中\n   节点会自动从 HuggingFace 下载 Intel/zoedepth-nyu-kitti\n   建议预先手动下载到:\n   D:\\ComfyUI_Official\\resources\\models\\zoedepth\\\n   并配置 HuggingFace 缓存\n\n❌ control-lora-depth 找不到\n   从 stabilityai/control-lora 下载:\n   controlnet\\control-lora\\control-lora-depth-rank256.safetensors\n\n\n📁 模型路径\n\n• InstantID: resources\\models\\instantid\\\n• Control-LoRA: resources\\models\\controlnet\\control-lora\\\n• ZoeDepth: resources\\models\\zoedepth\\ + HF缓存\n• InsightFace: ComfyUI\\models\\insightface\\models\\antelopev2\\\n\n\n🔗 参考\n\n• InstantID: github.com/cubiq/ComfyUI_InstantID\n• Control-LoRA: huggingface.co/stabilityai/control-lora\n• ZoeDepth: huggingface.co/Intel/zoedepth-nyu-kitti"],"type":"Note","bgcolor":"#447","inputs":[],"flags":{},"order":0,"mode":0,"outputs":[]}],"links":[[2,5,0,3,3,"LATENT"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[19,8,0,15,0,"IMAGE"],[122,4,1,39,0,"CLIP"],[123,4,1,40,0,"CLIP"],[197,11,0,60,0,"INSTANTID"],[198,38,0,60,1,"FACEANALYSIS"],[199,16,0,60,2,"CONTROL_NET"],[203,39,0,60,5,"CONDITIONING"],[204,40,0,60,6,"CONDITIONING"],[206,4,0,60,4,"MODEL"],[214,13,0,60,3,"IMAGE"],[227,60,0,3,0,"MODEL"],[228,60,2,72,1,"CONDITIONING"],[229,60,1,72,0,"CONDITIONING"],[230,72,0,3,1,"CONDITIONING"],[231,72,1,3,2,"CONDITIONING"],[232,73,0,72,2,"CONTROL_NET"],[236,74,0,60,7,"IMAGE"],[238,74,0,77,0,"IMAGE"],[239,77,0,72,3,"IMAGE"]],"groups":[],"config":{},"extra":{"workflowRendererVersion":"LG","ue_links":[],"links_added_by_ue":[],"ds":{"scale":1.4849628455092638,"offset":[-167.13944771903505,-262.7065442795228]}},"version":0.4}
