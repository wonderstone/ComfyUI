{"id":"33c4f8fb-de01-4ad6-ac3b-d4573c542662","revision":0,"last_node_id":68,"last_link_id":222,"nodes":[{"id":15,"type":"PreviewImage","pos":[1670,300],"size":[584.0855712890625,610.4592895507812],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":19}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":5,"type":"EmptyLatentImage","pos":[910,540],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"EmptyLatentImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[1016,1016,1]},{"id":8,"type":"VAEDecode","pos":[1670,210],"size":[210,46],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[19]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"VAEDecode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":40,"type":"CLIPTextEncode","pos":[520,620],"size":[286.3603515625,112.35245513916016],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":123},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[204]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["photograph, deformed, glitch, noisy, realistic, stock photo"]},{"id":38,"type":"InstantIDFaceAnalysis","pos":[570,180],"size":[227.09793090820312,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"FACEANALYSIS","name":"FACEANALYSIS","type":"FACEANALYSIS","slot_index":0,"links":[198]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"InstantIDFaceAnalysis","aux_id":"cubiq/ComfyUI_InstantID","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["CUDA"]},{"id":16,"type":"ControlNetLoader","pos":[560,290],"size":[250.07241821289062,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","slot_index":0,"links":[199]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"ControlNetLoader","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["instantid_controlnet.safetensors"]},{"id":11,"type":"InstantIDModelLoader","pos":[560,70],"size":[238.72393798828125,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"instantid_file","name":"instantid_file","type":"COMBO","widget":{"name":"instantid_file"},"link":null}],"outputs":[{"localized_name":"INSTANTID","name":"INSTANTID","type":"INSTANTID","slot_index":0,"links":[197]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"InstantIDModelLoader","aux_id":"cubiq/ComfyUI_InstantID","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["ip-adapter.bin"]},{"id":39,"type":"CLIPTextEncode","pos":[520,430],"size":[291.9967346191406,128.62518310546875],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":122},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[203]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["((masterpiece, best quality, high definition, high resolution, very aesthetic)), realistic lighting effects, very detailed eyes, pale skin, ((very pretty young girl working out at the gym)), soft breasts, red eyeshadow, dark blue eyes, dynamic angle,"]},{"id":4,"type":"CheckpointLoaderSimple","pos":[70,520],"size":[315,98],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[206]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[122,123]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"CheckpointLoaderSimple","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["SDXL1.0\\artificialDREAMSDXL_v10.safetensors"]},{"id":13,"type":"LoadImage","pos":[290,70],"size":[214.080078125,314],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[214]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["pasted/image.png","image"]},{"id":60,"type":"ApplyInstantID","pos":[910,210],"size":[315,266],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"instantid","name":"instantid","type":"INSTANTID","link":197},{"localized_name":"insightface","name":"insightface","type":"FACEANALYSIS","link":198},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":199},{"localized_name":"image","name":"image","type":"IMAGE","link":214},{"localized_name":"model","name":"model","type":"MODEL","link":206},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":203},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":204},{"localized_name":"image_kps","name":"image_kps","shape":7,"type":"IMAGE","link":222},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_at","name":"start_at","type":"FLOAT","widget":{"name":"start_at"},"link":null},{"localized_name":"end_at","name":"end_at","type":"FLOAT","widget":{"name":"end_at"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[220]},{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":1,"links":[200]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":2,"links":[201]}],"properties":{"cnr_id":"comfyui_instantid","ver":"72495e806bc2ab9c41581e15ccaa1bcf83c477e8","Node name for S\u0026R":"ApplyInstantID","aux_id":"cubiq/ComfyUI_InstantID","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[0.8,0,1]},{"id":67,"type":"LoadImage","pos":[974.9142766657747,799.9927039443935],"size":[274.080078125,314],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[222]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{}},"Node name for S\u0026R":"LoadImage"},"widgets_values":["00102-4139972693.jpg","image"]},{"id":3,"type":"KSampler","pos":[1300,210],"size":[315,262],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":220},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":200},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":201},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"KSampler","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[7,"fixed",30,4.5,"ddpm","karras",1]},{"size":[420,750],"id":68,"color":"#335","properties":{"text":"🎭 InstantID 使用说明 🎭\n\n\n✅ 必要条件\n\n【模型要求】\n• 只支持 SDXL 模型（不支持 SD1.5/FLUX）\n• InstantID 模型: ip-adapter.bin\n• ControlNet: instantid_controlnet.safetensors\n• InsightFace: antelopev2 (5个 .onnx 文件)\n\n【节点配置】\n• CheckpointLoaderSimple: 选择 SDXL checkpoint\n• InstantIDModelLoader: ip-adapter.bin\n• ControlNetLoader: instantid_controlnet.safetensors\n• InstantIDFaceAnalysis: provider=CUDA\n• LoadImage: 上传清晰的人脸照片\n\n\n⚙️ 参数建议\n\n【ApplyInstantID】\n• weight: 0.8 (ID 相似度，越高越像原图)\n• start_at: 0\n• end_at: 1\n\n【KSampler】\n• steps: 25-30\n• cfg: 4-5 (InstantID 推荐较低 CFG)\n• sampler: ddpm / euler\n• scheduler: karras\n\n\n⚠️ 常见问题\n\n❌ ip-adapter.bin not in list\n   检查 extra_model_paths.yaml 中 instantid 路径\n\n❌ 下载 antelopev2.zip\n   InsightFace 不遵循 extra_model_paths\n   需要创建符号链接到本地 models/insightface/\n\n❌ 人脸检测失败\n   确保图片有清晰正面人脸\n   检查 CUDA 是否可用\n\n\n📁 模型路径\n\n• InstantID: D:\\ComfyUI_Official\\resources\\models\\instantid\\\n• InsightFace: ComfyUI\\models\\insightface\\models\\antelopev2\\\n  (符号链接到共享目录)\n\n\n🔗 参考\n\n项目: https://github.com/cubiq/ComfyUI_InstantID"},"pos":[-500,50],"widgets_values":["🎭 InstantID 使用说明 🎭\n\n\n✅ 必要条件\n\n【模型要求】\n• 只支持 SDXL 模型（不支持 SD1.5/FLUX）\n• InstantID 模型: ip-adapter.bin\n• ControlNet: instantid_controlnet.safetensors\n• InsightFace: antelopev2 (5个 .onnx 文件)\n\n【节点配置】\n• CheckpointLoaderSimple: 选择 SDXL checkpoint\n• InstantIDModelLoader: ip-adapter.bin\n• ControlNetLoader: instantid_controlnet.safetensors\n• InstantIDFaceAnalysis: provider=CUDA\n• LoadImage: 上传清晰的人脸照片\n\n\n⚙️ 参数建议\n\n【ApplyInstantID】\n• weight: 0.8 (ID 相似度，越高越像原图)\n• start_at: 0\n• end_at: 1\n\n【KSampler】\n• steps: 25-30\n• cfg: 4-5 (InstantID 推荐较低 CFG)\n• sampler: ddpm / euler\n• scheduler: karras\n\n\n⚠️ 常见问题\n\n❌ ip-adapter.bin not in list\n   检查 extra_model_paths.yaml 中 instantid 路径\n\n❌ 下载 antelopev2.zip\n   InsightFace 不遵循 extra_model_paths\n   需要创建符号链接到本地 models/insightface/\n\n❌ 人脸检测失败\n   确保图片有清晰正面人脸\n   检查 CUDA 是否可用\n\n\n📁 模型路径\n\n• InstantID: D:\\ComfyUI_Official\\resources\\models\\instantid\\\n• InsightFace: ComfyUI\\models\\insightface\\models\\antelopev2\\\n  (符号链接到共享目录)\n\n\n🔗 参考\n\n项目: https://github.com/cubiq/ComfyUI_InstantID"],"type":"Note","bgcolor":"#447","inputs":[],"flags":{},"order":0,"mode":0,"outputs":[]}],"links":[[2,5,0,3,3,"LATENT"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[19,8,0,15,0,"IMAGE"],[122,4,1,39,0,"CLIP"],[123,4,1,40,0,"CLIP"],[197,11,0,60,0,"INSTANTID"],[198,38,0,60,1,"FACEANALYSIS"],[199,16,0,60,2,"CONTROL_NET"],[200,60,1,3,1,"CONDITIONING"],[201,60,2,3,2,"CONDITIONING"],[203,39,0,60,5,"CONDITIONING"],[204,40,0,60,6,"CONDITIONING"],[206,4,0,60,4,"MODEL"],[214,13,0,60,3,"IMAGE"],[220,60,0,3,0,"MODEL"],[222,67,0,60,7,"IMAGE"]],"groups":[],"config":{},"extra":{"workflowRendererVersion":"LG","ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.7030519930596861,"offset":[106.08685483301515,190.69349441031312]}},"version":0.4}
