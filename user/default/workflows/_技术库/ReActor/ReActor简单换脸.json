{"id":"d8fc6ece-2cf8-44d9-9379-48c835d9f10c","revision":0,"last_node_id":10,"last_link_id":6,"nodes":[{"id":4,"type":"PreviewImage","pos":[780,50],"size":[400,400],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":3}],"outputs":[],"title":"鉁?鎹㈣劯缁撴灉","properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":5,"type":"Note","pos":[-500,50],"size":[500,600],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"text":"","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["\n📌 ReActor 单图换脸 Workflow 使用说明\n\n\n🎯 基本使用:\n1.【源图】选择提供人脸的图片 (谁的脸)\n2.【目标图】选择要被换脸的图片 (换到哪里)\n3. 点击 Queue Prompt 运行\n\n\n📦 节点说明\n\n\n【ReActorLoadFaceModel】加载预保存的人脸模型\n• 可加载 Blend Workflow 生成的 .safetensors\n• 加载后可不提供源图，直接用模型换脸\n• 比每次从图片提取人脸更快更稳定\n\n【ReActorFaceBoost】人脸增强 (可选但推荐)\n• 在换脸基础上进行二次人脸修复\n• 可以显著提升换脸后的人脸质量\n• 特别适合源图/目标图质量差异大的情况\n\n\n💡 使用技巧\n\n• 源图和face_model可以同时连接，会优先用model\n• 多张脸用 input_faces_index 指定 (0=第一张)\n• 效果不好时尝试调整 face_restore_visibility"],"color":"#233","bgcolor":"#355"},{"id":1,"type":"LoadImage","pos":[50,50],"size":[320,314],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[2]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"馃幆 鐩爣鍥?(瑕佹崲鑴哥殑鍥剧墖)","properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["00229-3388812580.png","image"]},{"id":7,"type":"ReActorLoadFaceModel","pos":[-5.18286407240139,-62.22230747012601],"size":[285.6529296875,78],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"face_model","name":"face_model","type":"COMBO","widget":{"name":"face_model"},"link":null}],"outputs":[{"localized_name":"FACE_MODEL","name":"FACE_MODEL","type":"FACE_MODEL","links":[5]},{"localized_name":"FACE_MODEL_NAME","name":"FACE_MODEL_NAME","type":"STRING","links":null}],"properties":{"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{}},"Node name for S\u0026R":"ReActorLoadFaceModel"},"widgets_values":["test.safetensors"]},{"id":3,"type":"ReActorFaceSwap","pos":[420,50],"size":[315,358],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"input_image","name":"input_image","type":"IMAGE","link":2},{"localized_name":"source_image","name":"source_image","shape":7,"type":"IMAGE","link":1},{"localized_name":"face_model","name":"face_model","shape":7,"type":"FACE_MODEL","link":5},{"localized_name":"face_boost","name":"face_boost","shape":7,"type":"FACE_BOOST","link":6},{"localized_name":"enabled","name":"enabled","type":"BOOLEAN","widget":{"name":"enabled"},"link":null},{"localized_name":"swap_model","name":"swap_model","type":"COMBO","widget":{"name":"swap_model"},"link":null},{"localized_name":"facedetection","name":"facedetection","type":"COMBO","widget":{"name":"facedetection"},"link":null},{"localized_name":"face_restore_model","name":"face_restore_model","type":"COMBO","widget":{"name":"face_restore_model"},"link":null},{"localized_name":"face_restore_visibility","name":"face_restore_visibility","type":"FLOAT","widget":{"name":"face_restore_visibility"},"link":null},{"localized_name":"codeformer_weight","name":"codeformer_weight","type":"FLOAT","widget":{"name":"codeformer_weight"},"link":null},{"localized_name":"detect_gender_input","name":"detect_gender_input","type":"COMBO","widget":{"name":"detect_gender_input"},"link":null},{"localized_name":"detect_gender_source","name":"detect_gender_source","type":"COMBO","widget":{"name":"detect_gender_source"},"link":null},{"localized_name":"input_faces_index","name":"input_faces_index","type":"STRING","widget":{"name":"input_faces_index"},"link":null},{"localized_name":"source_faces_index","name":"source_faces_index","type":"STRING","widget":{"name":"source_faces_index"},"link":null},{"localized_name":"console_log_level","name":"console_log_level","type":"COMBO","widget":{"name":"console_log_level"},"link":null}],"outputs":[{"localized_name":"SWAPPED_IMAGE","name":"SWAPPED_IMAGE","type":"IMAGE","slot_index":0,"links":[3]},{"localized_name":"FACE_MODEL","name":"FACE_MODEL","type":"FACE_MODEL","links":null},{"localized_name":"ORIGINAL_IMAGE","name":"ORIGINAL_IMAGE","type":"IMAGE","links":null}],"properties":{"Node name for S\u0026R":"ReActorFaceSwap","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[true,"inswapper_128.onnx","retinaface_mobile0.25","GFPGANv1.4.pth",1,0,"no","no","0","0",1]},{"id":8,"type":"ReActorFaceBoost","pos":[-348.87901830588294,-11.228812776730948],"size":[292.73046875,178],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"enabled","name":"enabled","type":"BOOLEAN","widget":{"name":"enabled"},"link":null},{"localized_name":"boost_model","name":"boost_model","type":"COMBO","widget":{"name":"boost_model"},"link":null},{"localized_name":"interpolation","name":"interpolation","type":"COMBO","widget":{"name":"interpolation"},"link":null},{"localized_name":"visibility","name":"visibility","type":"FLOAT","widget":{"name":"visibility"},"link":null},{"localized_name":"codeformer_weight","name":"codeformer_weight","type":"FLOAT","widget":{"name":"codeformer_weight"},"link":null},{"localized_name":"restore_with_main_after","name":"restore_with_main_after","type":"BOOLEAN","widget":{"name":"restore_with_main_after"},"link":null}],"outputs":[{"localized_name":"FACE_BOOST","name":"FACE_BOOST","type":"FACE_BOOST","links":[6]}],"properties":{"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{}},"Node name for S\u0026R":"ReActorFaceBoost"},"widgets_values":[true,"GFPGANv1.3.pth","Lanczos",1,0.32,false]},{"id":2,"type":"LoadImage","pos":[50,400],"size":[320,314],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[1]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"馃懁 婧愬浘 (鎻愪緵浜鸿劯)","properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["9GKPKFR2AJ2EDZ0W4WZSXBD3G0.jpeg","image"]},{"size":[620,520],"id":9,"color":"#324","properties":{"text":""},"pos":[780,480],"widgets_values":["\n⚙️ ReActorFaceSwap 参数详解\n\n\n【swap_model】换脸核心模型\n• inswapper_128.onnx - 唯一选项，InsightFace官方模型\n\n【facedetection】人脸检测器\n• retinaface_resnet50 - 精度最高，速度慢\n• retinaface_mobile0.25 - 速度快，精度够用 ⭐推荐\n• YOLOv5l/YOLOv5n - 备选方案\n\n【face_restore_model】人脸修复模型\n• GFPGANv1.4.pth - 通用，效果均衡 ⭐推荐\n• GFPGANv1.3.pth - 老版本，略柔和\n• GPEN-BFR-512.onnx - 速度快，细节少\n• codeformer-v0.1.0.pth - 高质量，需调weight\n• none - 不修复 (保留原始换脸结果)\n\n【face_restore_visibility】修复可见度 0.1-1.0\n• 1.0 = 完全应用修复效果 ⭐推荐\n• 0.5 = 50%修复 + 50%原始\n• 低值保留更多原始细节但可能有瑕疵\n\n【codeformer_weight】仅CodeFormer用 0-1\n• 0 = 更忠实原图 (可能有瑕疵)\n• 1 = 更高质量 (可能丢失特征)\n• 0.5-0.7 ⭐推荐平衡值\n\n【detect_gender_input/source】性别过滤\n• no - 不限制 ⭐推荐\n• female/male - 只处理指定性别的脸\n\n【input_faces_index】目标图中第几张脸\n• 0 = 第一张 (默认最大的脸)\n• 0,1,2 = 同时处理多张脸\n\n【source_faces_index】源图中第几张脸\n• 0 = 第一张 (默认)\n\n【console_log_level】日志详细程度\n• 0=静默 1=正常 2=详细"],"type":"Note","bgcolor":"#546","inputs":[],"flags":{},"order":7,"mode":0,"outputs":[]},{"size":[500,320],"id":10,"color":"#342","properties":{"text":""},"pos":[-500,680],"widgets_values":["\n⚙️ ReActorFaceBoost 参数详解\n\n\n【enabled】开关\n• ON = 启用人脸增强\n• OFF = 禁用 (节省处理时间)\n\n【boost_model】增强使用的修复模型\n• 与 face_restore_model 选项相同\n• 可以用不同模型进行二次修复\n• GFPGANv1.3/1.4 ⭐推荐\n\n【interpolation】缩放插值算法\n• Lanczos - 最高质量 ⭐推荐\n• Bicubic - 高质量，速度快\n• Bilinear - 中等质量\n• Nearest - 最快，质量最低\n\n【visibility】增强可见度 0.1-1.0\n• 1.0 = 完全应用增强 ⭐推荐\n• 低值 = 更多保留换脸原始结果\n\n【codeformer_weight】同主节点\n• 0.3-0.5 ⭐推荐 (增强时偏保守)\n\n【restore_with_main_after】增强后再用主模型修复\n• OFF ⭐推荐 (避免过度处理)\n• ON = 双重修复 (可能过于平滑)"],"type":"Note","bgcolor":"#564","inputs":[],"flags":{},"order":8,"mode":0,"outputs":[]}],"links":[[1,2,0,3,1,"IMAGE"],[2,1,0,3,0,"IMAGE"],[3,3,0,4,0,"IMAGE"],[5,7,0,3,2,"FACE_MODEL"],[6,8,0,3,3,"FACE_BOOST"]],"groups":[],"config":{},"extra":{"workflowRendererVersion":"LG","ue_links":[],"links_added_by_ue":[],"ds":{"scale":1.2256465334605826,"offset":[409.5001402071208,41.18703314388521]}},"version":0.4}
