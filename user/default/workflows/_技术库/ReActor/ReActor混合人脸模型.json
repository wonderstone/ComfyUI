{"id":"144bf0dc-d833-4327-aebc-3ec89af875f0","revision":0,"last_node_id":51,"last_link_id":68,"nodes":[{"id":47,"type":"Note","pos":[710,50],"size":[360,160],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"text":"","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["save_mode - save a blended face model or not\nsend_only - if you already build the model and want to use with the main ReActor node but don\u0027t want to waste your time for rebuilding it when you run the queue again - set this option to YES \n\nMean (recommended) - Average value (best result 馃憤)\nMedian* - Mid-point value (may be funny 馃槄)\nMode - Most common value (may be scary 馃槰)\n\n*Mean and Median will be similar if you load two images"],"color":"#432","bgcolor":"#653"},{"id":3,"type":"LoadImage","pos":[50,80],"size":[320,314],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[3,67]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["_h_0037_gonzalomoXLFluxPony_v60PhotoXLDMD.png","image"]},{"id":4,"type":"LoadImage","pos":[50,430],"size":[320,314],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[4]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["00002_1936422288.png","image"]},{"id":6,"type":"LoadImage","pos":[380,430],"size":[320,314],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[5]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["00229-3388812580.png","image"]},{"id":11,"type":"LoadImage","pos":[710,430],"size":[320,314],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[14]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["00102-4139972693.jpg","image"]},{"id":5,"type":"ImpactMakeImageBatch","pos":[505.060164678248,201.72371059286414],"size":[160,110],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":3},{"name":"image2","type":"IMAGE","link":4},{"name":"image3","type":"IMAGE","link":5},{"name":"image4","type":"IMAGE","link":14},{"name":"image5","type":"IMAGE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[6]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"61bd8397a18e7e7668e6a24e95168967768c2bed","Node name for S\u0026R":"ImpactMakeImageBatch","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":1,"type":"ReActorBuildFaceModel","pos":[710,260],"size":[315,150],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"images","name":"images","shape":7,"type":"IMAGE","link":6},{"localized_name":"face_models","name":"face_models","shape":7,"type":"FACE_MODEL","link":null},{"localized_name":"save_mode","name":"save_mode","type":"BOOLEAN","widget":{"name":"save_mode"},"link":null},{"localized_name":"send_only","name":"send_only","type":"BOOLEAN","widget":{"name":"send_only"},"link":null},{"localized_name":"face_model_name","name":"face_model_name","type":"STRING","widget":{"name":"face_model_name"},"link":null},{"localized_name":"compute_method","name":"compute_method","type":"COMBO","widget":{"name":"compute_method"},"link":null}],"outputs":[{"localized_name":"FACE_MODEL","name":"FACE_MODEL","type":"FACE_MODEL","slot_index":0,"links":[66]}],"properties":{"Node name for S\u0026R":"ReActorBuildFaceModel","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[true,true,"test","Mean"]},{"id":50,"type":"PreviewImage","pos":[1520,80],"size":[250,330],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":68}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S\u0026R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":49,"type":"ReActorFaceSwap","pos":[1160,80],"size":[315,358],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"input_image","name":"input_image","type":"IMAGE","link":67},{"localized_name":"source_image","name":"source_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"face_model","name":"face_model","shape":7,"type":"FACE_MODEL","link":66},{"localized_name":"face_boost","name":"face_boost","shape":7,"type":"FACE_BOOST","link":null},{"localized_name":"enabled","name":"enabled","type":"BOOLEAN","widget":{"name":"enabled"},"link":null},{"localized_name":"swap_model","name":"swap_model","type":"COMBO","widget":{"name":"swap_model"},"link":null},{"localized_name":"facedetection","name":"facedetection","type":"COMBO","widget":{"name":"facedetection"},"link":null},{"localized_name":"face_restore_model","name":"face_restore_model","type":"COMBO","widget":{"name":"face_restore_model"},"link":null},{"localized_name":"face_restore_visibility","name":"face_restore_visibility","type":"FLOAT","widget":{"name":"face_restore_visibility"},"link":null},{"localized_name":"codeformer_weight","name":"codeformer_weight","type":"FLOAT","widget":{"name":"codeformer_weight"},"link":null},{"localized_name":"detect_gender_input","name":"detect_gender_input","type":"COMBO","widget":{"name":"detect_gender_input"},"link":null},{"localized_name":"detect_gender_source","name":"detect_gender_source","type":"COMBO","widget":{"name":"detect_gender_source"},"link":null},{"localized_name":"input_faces_index","name":"input_faces_index","type":"STRING","widget":{"name":"input_faces_index"},"link":null},{"localized_name":"source_faces_index","name":"source_faces_index","type":"STRING","widget":{"name":"source_faces_index"},"link":null},{"localized_name":"console_log_level","name":"console_log_level","type":"COMBO","widget":{"name":"console_log_level"},"link":null}],"outputs":[{"localized_name":"SWAPPED_IMAGE","name":"SWAPPED_IMAGE","type":"IMAGE","slot_index":0,"links":[68]},{"localized_name":"FACE_MODEL","name":"FACE_MODEL","type":"FACE_MODEL","links":null},{"localized_name":"ORIGINAL_IMAGE","name":"ORIGINAL_IMAGE","type":"IMAGE","links":null}],"properties":{"Node name for S\u0026R":"ReActorFaceSwap","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[true,"inswapper_128.onnx","retinaface_mobile0.25","GPEN-BFR-512.onnx",1,0.9,"female","female","0","0",1]},{"size":[980,380],"id":51,"color":"#234","properties":{"text":""},"pos":[50,780],"widgets_values":["📌 【混合人脸模型 Workflow 详细说明】\n\n�� 功能：将多张人脸图片的特征融合成一个「虚拟人脸模型」，然后用它来换脸\n\n\n📥 输入节点 (LoadImage x4)\n\n• 图1 (左上): 同时作为「源脸之一」和「目标图」(最终换脸效果预览在这张图上)\n• 图2-4: 额外的人脸图片，与图1一起混合\n\n💡 可以只用2-3张图，不需要全部填满\n\n\n⚙️ ReActorBuildFaceModel 参数说明\n\n• save_mode: 是否保存混合模型到磁盘 (可复用)\n• send_only: YES=跳过重建,直接使用已保存的模型 (节省时间)\n• face_model_name: 保存的模型文件名\n• compute_method: \n   - Mean (推荐👍): 平均值,效果最自然\n   - Median: 中位数,可能有趣\n   - Mode: 众数,可能会很奇怪\n\n\n⚙️ ReActorFaceSwap 关键参数\n\n• swap_model: inswapper_128.onnx (唯一选项)\n• facedetection: 人脸检测器\n   - retinaface_resnet50: 精度高,速度慢\n   - retinaface_mobile0.25: 速度快,精度略低 (推荐)\n• face_restore_model: 人脸修复/增强\n   - GFPGANv1.4.pth: 通用,效果好 (推荐)\n   - GPEN-BFR-512.onnx: 速度快\n   - codeformer-v0.1.0.pth: 高质量,需调codeformer_weight\n• face_restore_visibility: 修复强度 0.1-1.0 (推荐: 1.0)\n• codeformer_weight: 仅CodeFormer用 0-1 (推荐: 0.5-0.7)\n• detect_gender_input/source: 性别过滤 (no=不限)\n• input_faces_index: 目标图中第几张脸 (0=第一张)\n• source_faces_index: 源图中第几张脸 (0=第一张)"],"type":"Note","bgcolor":"#456","inputs":[],"flags":{},"order":9,"mode":0,"outputs":[]}],"links":[[3,3,0,5,0,"IMAGE"],[4,4,0,5,1,"IMAGE"],[5,6,0,5,2,"IMAGE"],[6,5,0,1,0,"IMAGE"],[14,11,0,5,3,"IMAGE"],[66,1,0,49,2,"FACE_MODEL"],[67,3,0,49,0,"IMAGE"],[68,49,0,50,0,"IMAGE"]],"groups":[],"config":{},"extra":{"workflowRendererVersion":"LG","ue_links":[],"links_added_by_ue":[],"ds":{"scale":1.5776939420077714,"offset":[-818.8082715868646,39.6428298329275]}},"version":0.4}
